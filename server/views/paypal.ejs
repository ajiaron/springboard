<!DOCTYPE html>
<html>
  <head>
    <title>PayPal Integration</title>
  </head>
  <body>
    <div id="paypal-button-container"></div>

    <script src="https://www.paypal.com/sdk/js?client-id=Ab9oFdzyAVgxpV3auIMVK4hO41F5mcouaDk2CwTxHuYAQioTuKAWVAAiut5F7XHqlhq2GA7Lm2TnNsWL&currency=USD&disable-funding=paylater&components=buttons,funding-eligibility"></script>
    
    <script>
    paypal.Buttons({
        createOrder: function(data, actions) {
          return actions.order.create({
            intent: "CAPTURE",
            purchase_units: [
              {
                description: "<%= description %>", // replace with actual description if you have one
                amount: {
                  currency_code: "USD",
                  value: "<%= value %>" // replace with actual value if you have one
                }
              }
            ]
          });
        },
        onApprove: function(data, actions) {
          return actions.order.capture().then(function(details) {
            console.log(details);
            // after the payment is captured, you can then redirect your user back to your app:
            // window.location.href = 'https://your-app-url';
            window.location.href = 'http://localhost:3001/catalog'
          });
        },
        onError: function(err) {
          console.log(err);
        }
      }).render('#paypal-button-container');
    </script>
  </body>
</html>
